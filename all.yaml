---
- name: Update web servers
  hosts: annuals
  become: true

  tasks:
  - name: apt-get update
    ansible.builtin.apt:
      update_cache: yes

  - name: latest jq
    ansible.builtin.apt:
      name: jq
      state: latest

  - name: pyenv requirements
    ansible.builtin.apt:
      pkg:
        - build-essential
        - libssl-dev
        - zlib1g-dev
        - libbz2-dev
        - libreadline-dev
        - libsqlite3-dev
        - curl
        - git
        - libncursesw5-dev
        - xz-utils
        - tk-dev
        - libxml2-dev
        - libxmlsec1-dev
        - libffi-dev
        - liblzma-dev

- name: Update all packages to their latest version
  ansible.builtin.apt:
    name: "*"
    state: latest
